# Activity Diagram

Activity diagrams are used to model the behavior in a business process independent of objects. Activity diagrams can be used to model everything from a high‐level business workflow that involves many different use cases, to the details of an individual use case, all the way down to the specific details of an individual method. In a nutshell, activity diagrams can be used to model any type of process.

Activity diagrams portray the primary activities and the relationships among the activities in a process.

![image](https://user-images.githubusercontent.com/73081144/179657672-c2bbc105-2655-4e74-a28a-bd30d394d9a6.png)

## Elements of an Activity Diagram

![image](https://user-images.githubusercontent.com/73081144/179656215-aebd21cb-36c3-444e-8459-a232e36e1fbb.png)

### Actions and Activities

Actions and activities are performed for some specific business reason. Actions and activities can represent manual or computerized behavior. They are depicted in an activity diagram as a rounded rectangle (see Figure 4‐7). They should have a name that begins with a verb and ends with a noun (e.g., Get Patient Information or Make Payment Arrangements). Names should be short, yet contain enough information so that the reader can easily understand exactly what they do. The only difference between an action and an activity is that an activity can be decomposed further into a set of activities and/or actions, whereas an action represents a simple nondecomposable piece of the overall behavior being modeled. Typically, only activities are used for business process or workflow modeling. In most cases, each activity is associated with a use case. The activity diagram in Figure 4‐8 shows a set of separate but related activities for the Manage Appointments use case (see Figures 4‐2–4‐4): Get Patient Information, Update Patient Information, Create New Patient, Make Payment Arrangements, Make New Appointment, Change Appointment, and Cancel Appointment. Notice that the Make Payment Arrangements and Make New Appointment activities appear twice in the diagram: once for an “old” patient and once for a “new” patient.

### Object Nodes

Activities and actions typically modify or transform objects. Object nodes model these objects in an activity diagram. Object nodes are portrayed in an activity diagram as rectangles (see Figure 4‐7). The name of the class of the object is written inside the rectangle. Essentially, object nodes represent the flow of information from one activity to another activity. The simple appointment system portrayed in Figure 4‐8 shows object nodes flowing from the Get Patient Information activity. In most business process–based activity diagrams, object nodes are not included. We have included them in Figure 4‐8 for demonstration purposes only.

### Control Flows and Object Flows

There are two different types of flows in activity diagrams: control and object (see Figure 4‐7). Control flows model the paths of execution through a business process. A control flow is portrayed as a solid line with an arrowhead on it showing the direction of flow. Control flows can be attached only to actions or activities. Figure 4‐8 portrays a set of control flows through the doctor's office appointment system. Object flows model the flow of objects through a business process. Because activities and actions modify or transform objects, object flows are necessary to show the actual objects that flow into and out of the actions or activities. An object flow is depicted as a dashed line with an arrowhead on it showing the direction of flow. An individual object flow must be attached to an action or activity on one end and an object node on the other end. Figure 4‐8 portrays a set of control and object flows through the appointment system of a doctor's office. Like with object nodes, in most business process–based activity diagrams, object flows are not included. We have included them in Figure 4‐8 for demonstration purposes only.

### Control Nodes

There are seven different types of control nodes in an activity diagram: initial, final‐activity, final‐flow, decision, merge, fork, and join (see Figure 4‐7). An initial node portrays the beginning of a set of actions or activities. An initial node is shown as a small filled‐in circle. A final‐activity node is used to stop the process being modeled. Any time a final‐activity node is reached, all actions and activities are ended immediately, regardless of whether they are completed. A final‐activity node is represented as a circle surrounding a small, filled‐in circle, making it resemble a bull's‐eye. A final‐flow node is similar to a final‐activity node, except that it stops a specific path of execution through the business process but allows the other concurrent or parallel paths to continue. A final‐flow node is shown as a small circle with an X in it. In most business process–based activity diagrams, it is better to not include them. It is much more difficult to understand a business process that has multiple exit points. Consequently, it is better to always attempt to limit the exit from the business process with a single unifying final‐activity node.

The decision and merge nodes support modeling the decision structure of a business process. The decision node is used to represent the actual test condition that determines which of the paths exiting the decision node is to be traversed. In this case, each exiting path must be labeled with a guard condition. A guard condition represents the value of the test for that particular path to be executed. For example, in Figure 4‐8, the decision node immediately below the Get Patient Information activity has two mutually exclusive paths that could be executed: one for old, or previous, patients and the other for new patients. The merge node is used to bring back together multiple mutually exclusive paths that have been split based on an earlier decision (e.g., the old‐ and new‐patient paths in Figure 4‐8 are brought back together near the bottom of the diagram). However, sometimes, for clarity, it is better not to use a merge node. For example, in Figure 4‐9, which of the two activity diagrams, both representing an overview level of an order process, is easier to understand, the one on the left or the one on the right? The one on the left contains a merge node for the More Items on Order question, but the one on the right does not. In a sense, the decision node is playing double duty in the diagram on the right: It also serves as a merge node. Technically speaking, we should not omit the merge node; however, sometimes being technically correct according to the UML's diagramming rules actually causes the diagram to become confusing. From a business process modeling perspective, a good deal of common sense can go a long way.

![image](https://user-images.githubusercontent.com/73081144/179657707-8130c422-5331-4bd3-ba6d-5b55902b3ed3.png)

The fork and join nodes allow parallel and concurrent processes to be modeled (see Figure 4‐7). The fork node is used to split the behavior of the business process into multiple parallel or concurrent flows. Unlike the decision node, the paths are not mutually exclusive (i.e., both paths are executed concurrently). For example, in Figure 4‐10, the fork node is used to show that two concurrent, parallel processes are to be executed. In this case, each process is executed by two separate processors (parents). The purpose of the join node is similar to that of the merge node. The join node simply brings back together the separate parallel or concurrent flows in the business process into a single flow.

### Swimlanes

Activity diagrams can model a business process independent of any object implementation. However, there are times when it helps to break up an activity diagram in such a way that it can be used to assign responsibility to objects or individuals who would actually perform the activity. This is especially useful when modeling a business workflow and is accomplished through the use of swimlanes. In Figure 4‐10, the swimlanes are used to break up among two parents the making of a school lunch comprising a peanut butter and jelly sandwich, a drink, and dessert. In this case, we use vertical swimlanes. We could also draw the activity diagram using more of a left‐to‐right orientation instead of a top‐down orientation. In that case, the swimlanes are drawn horizontally.

![image](https://user-images.githubusercontent.com/73081144/179657752-d59ea8a4-38ba-40ec-b517-085862bd8abb.png)

## Guidelines for Creating Activity Diagrams

- Because an activity diagram can be used to model any kind of process, you should set the context or scope of the activity being modeled. Once you have determined the scope, you should give the diagram an appropriate title.
- You must identify the activities, control flows, and object flows that occur between the activities.
- You should identify any decisions that are part of the process being modeled.
- You should attempt to identify any prospects for parallelism in the process.
- You should draw the activity diagram.

When drawing an activity diagram, the diagram should be limited to a single initial node that starts the process being modeled. This node should be placed at the top or top left of the diagram, depending on the complexity of the diagram. For most business processes, there should only be a single final‐activity node. This node should be placed at the bottom or bottom right of the diagram (see Figures 4‐8–4‐10). Because most high‐level business processes are sequential, not parallel, the use of a final‐flow node should be limited.

When modeling high‐level business processes or workflows, only the more important decisions should be included in the activity diagrams. In those cases, the guard conditions associated with the outflows of the decision nodes should be mutually exclusive. The outflows and guard conditions should form a complete set (i.e., all potential values of the decision are associated with one of the flows).

As in decision modeling, forks and joins should be included only to represent the more important parallel activities in the process. For example, an alternative version of Figure 4‐10 might not include the forks and joins associated with the Get Jelly, Get Bread, Get Peanut Butter, Get Drink, and Get Dessert activities. This would greatly simplify the diagram.12

When laying out the activity diagram, line crossings should be minimized to enhance the readability of the diagram. The activities on the diagram should also be laid out in a left‐to‐right and/or top‐to‐bottom order based on the order in which the activities are executed. For example, in Figure 4‐10, the Create Sandwich activity takes place before the Create Lunch activity.

When creating functional models, swimlanes should be used only to simplify the understanding of an activity diagram. Furthermore, the swimlanes should enhance the readability of a diagram. For example, when using a horizontal orientation for swimlanes, the top swimlane should represent the most important object or individual involved with the process. The order of the remaining swimlanes should be based on minimizing the number of flows crossing the different swimlanes. Also, when there are object flows among the activities associated with the different individuals (swimlanes) executing the activities of the process, it is useful to show the actual object flowing from one individual to another individual by including an object node between the two individuals (i.e., between the two swimlanes). This, of course, affects how the swimlanes should be placed on the diagram.

Finally, any activity that does not have any outflows or any inflows should be challenged. Activities with no outflows are referred to as *black‐hole activities*. If the activity is truly an end point in the diagram, the activity should have a control flow from it to a final‐activity or final‐flow node. An activity that does not have any inflow is known as a *miracle activity*. In this case, the activity is missing an inflow either from the initial node of the diagram or from another activity.

## Creating Activity Diagrams

1. Choose a Business Process
There are five steps in creating an activity diagram to document and model a business process. First, you must choose a business process that was previously identified to model. To do this, you should review the requirements definition (see Figure 3‐11) and the use‐case diagram (see Figures 4‐2–4‐4) created to represent the requirements. You should also review all of the documentation created during the requirements‐gathering process (see Chapter 3), for example, reports created that documented interviews or observations, any analysis of any questionnaires used, and any story cards or task lists created. In most cases, the use cases in the use‐case diagram will be the best place to start. For example, in the appointment system, we had identified three primary use cases: Manage Appointments, Produce Schedules, and Record Doctor Availability. We also identified a whole set of minor use cases (these will be useful in identifying the elements of the activity diagram).
2. Identify Activities
Second, identify the set of activities necessary to support the business process. For example, in Figure 3‐11, three processes are identified as being part of the Manage Appointments business process. Also, by reviewing the use‐case diagram (see Figure 4‐4), we see that five minor use cases are associated with the Manage Appointments major use case. Based on this information, we can identify a set of activities. In this case, the activities are Update Patient Information, Make Payment Arrangements, Create New Patient, Create Appointment, Cancel Appointment, and Change Appointment.
3. Identify Control Flows and Nodes
Third, identify the control flows and nodes necessary to document the logic of the business process. For example, in Figure 4‐4, the Make Payment Arrangements and Update Patient Information use cases are extensions to the Manage Appointments and Make Old Patient Appt use cases. We know that these use cases are executed only in certain circumstances. From this we can infer that the activity diagram must include some decision and merge nodes. Based on the requirements definition (see Figure 3‐11), we can infer another set of decision and merge nodes based on the Create Appointment, Cancel Appointment, and Change Appointment activities identified in the previous step.
4. Identify Object Flows and Nodes
Fourth, identify the object flows and nodes necessary to support the logic of the business process. Typically, object nodes and flows are not shown on many activity diagrams used to model a business process. The primary exception is if information captured by the system in one activity is used in an activity that is performed later, but not immediately after the activity that captured the information. In the appointment example, it is obvious that we need to be able to determine whether the patient is an old or new patient and the type of action that the patient would like to have performed (create, cancel, or change an appointment). It is obvious that a new patient cannot cancel or change an appointment because the patient is by definition a new patient. Obviously, we need to capture this type of information at the beginning of the business process and use it when required. For example, in the appointment problem, we need to have a Get Patient Information activity that captures the appropriate information and makes it available at the appropriate time in the process.
5. Lay Out and Draw Diagram
Fifth, lay out and draw the activity diagram to document the business process. For esthetic and understandability reasons, just as when drawing a use‐case diagram, you should attempt to minimize potential line crossings. Based on the previous steps and carefully laying out the diagram, the activity diagram in Figure 4‐8 was created to document the Manage Appointments business process.

## Library Example

As with the Campus Housing example, the first step is to choose a business process to model. In this case, we want to create an activity diagram for the Borrow Books use case (see Figure 4‐6). The functional requirements for this use case were:

The borrowing activities are built around checking books out and returning books by borrowers. There are three types of borrowers: students, faculty or staff, and guests. Regardless of the type of borrower, the borrower must have a valid ID card. If the borrower is a student, having the system check with the registrar's office to validate the ID card. If the borrower is a faculty or staff member, having the system check with the personnel office to validate the ID card. If the borrower is a guest, the ID card is checked against the library's own system. If the ID card is valid, the system must also check to determine whether the borrower has any overdue books or unpaid fines. If the ID card is invalid, the borrower has overdue books, or the borrower has unpaid fines, the system must reject the borrower's request to check out a book, otherwise the borrower's request should be honored.

The second step to model a business process is to identify the activities that make up the process. Based on the requirements for the Borrow Books use case, we can identify three major activities: Validate ID Card, Check for Overdue Books and Fines, and Check Out Books. The third step is to identify the control flows and control nodes necessary to model the decision logic of the business process. In this case, there obviously will have to be an initial node, a final‐flow node, and a set of decision and merge nodes for each decision to be made. The fourth step is to identify the object flows and object nodes necessary to complete the description of the business process. In this case, there really is no need to include object nodes and flows. Finally, we can lay out the diagram.

![image](https://user-images.githubusercontent.com/73081144/179659125-461de038-5009-4279-b66e-b39f74359853.png)

## Functional Model Verification and Validation

We have suggested three different representations for the functional model: activity diagrams, use‐case descriptions, and use‐case diagrams. In this section, we describe a set of rules to ensure that these three representations are consistent among themselves.

First, when comparing an activity diagram to a use‐case description, there should be at least one event recorded in the normal flow of events, subflows, or alternative/exceptional flows of the use‐case description for each activity or action that is included in an activity diagram, and each event should be associated with an activity or action. For example, in Figure 4‐4, there is an activity labeled Get Patient Information that is associated with the first two events contained in the normal flow of events of the use‐case description shown in Figure 4‐13.

Second, all objects portrayed as an object node in an activity diagram must be mentioned in an event in the normal flow of events, subflows, or alternative/exceptional flows of the use‐case description. For example, the activity diagram in Figure 4‐4 portrays an Appt object, and the use‐case description refers to a new appointment and changing or canceling an existing appointment.

Third, sequential order of the events in a use‐case description should occur in the same sequential order of the activities contained in an activity diagram. For example, in Figures 4‐4 and 4‐13, the events associated with the Get Patient Information activity (events 1 and 2) should occur before the events associated with the Make Payment Arrangements activity (event 4).

Fourth, when comparing a use‐case description to a use‐case diagram, there must be one and only one use‐case description for each use case, and vice versa. For example, Figure 4‐13 portrays the use‐case description of the Make Old Patient Appt use case. However, the use‐case diagram shown in Figure 4‐4, the activity diagram shown in Figure 4‐8, and the use‐case description given in Figure 4‐13 are inconsistent with each other. In this case, the use‐case diagram implies that the Make Payment Arrangements use case is optional regardless of whether the patient is a new or old patient. However, when we review the activity diagram, we see that it is an optional activity for old patients, but a required activity for a new patient. Therefore, only one of the diagrams is correct. In this instance, the use‐case diagram needs to be corrected. The new corrected use‐case diagram is shown in Figure 4‐21.

Fifth, all actors listed in a use‐case description must be portrayed on the use‐case diagram. Each actor must have an association link that connects it to the use case and must be listed with the association relationships in the use‐case description. For example, the Old Patient actor is listed in the use‐case description of the Make Old Patient Appt use case (see Figure 4‐13), it is listed with the association relationships in the Make Old Patient Appt use‐case description, and it is connected to the use case in the use‐case diagram (see Figure 4‐21).

Sixth, in some organizations, we should also include the stakeholders listed in the use‐case description as actors in the use‐case diagram. For example, there could have been an association between the Doctor actor and the Make Old Patient Appt use case (see Figures 4‐13 and 4‐21). However, in this case it was decided not to include this association because the Doctor never participates in the Make Old Patient Appt use case.28

Seventh, all other relationships listed in a use‐case description (include, extend, and generalization) must be portrayed on a use‐case diagram. For example, in Figure 4‐13, there is an extend relationship listed with the Update Patient Information use case, and in Figure 4‐21, we see that it appears on the diagram between the two use cases.

Finally, there are many diagram‐specific requirements that must be enforced. For example, in an activity diagram a decision node can be connected to activity or action nodes only with a control flow, and for every decision node there should be a matching merge node. Every type of node and flow has different restrictions. However, the complete restrictions for all the UML diagrams are beyond the scope of this text.
